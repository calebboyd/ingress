## API Report File for "ingress"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AnnotatedPropertyDescription } from 'reflect-annotations';
import { Annotation } from 'reflect-annotations';
import { Container } from '@ingress/di';
import { createAnnotationFactory } from 'reflect-annotations';
import { EventEmitter } from 'events';
import { IncomingMessage } from 'http';
import { Middleware } from 'app-builder';
import { Server } from 'http';
import { ServerResponse } from 'http';
import { Url } from 'url';

// @public (undocumented)
export type Addon<T> = (Annotation<Usable<T>> | Usable<T> | (Usable<T> & Middleware<T>)) & {
    [key: string]: any;
};

// @public (undocumented)
export interface BaseAuthContext {
    // (undocumented)
    authenticated: boolean;
}

// Warning: (ae-internal-missing-underscore) The name "BaseContext" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export class BaseContext<T extends BaseContext<T, A>, A extends BaseAuthContext> extends EventEmitter {
    constructor(req: IncomingMessage, res: ServerResponse);
    // (undocumented)
    app: Ingress<T, A>;
    // (undocumented)
    authContext: A;
    // (undocumented)
    get body(): any;
    set body(value: any);
    // (undocumented)
    error: Error | null | undefined;
    // (undocumented)
    handleError: (error: Error | null) => any;
    // (undocumented)
    handleResponse: () => any;
    // (undocumented)
    req: Request_2<T>;
    // (undocumented)
    res: Response_2<T>;
    // (undocumented)
    route: {
        url: Url;
        query: {
            [key: string]: any;
        };
        params: {
            [key: string]: any;
        };
        body: any;
        response: any;
        controllerInstance: any;
        parserResult: any;
        handler: {
            invokeAsync: Middleware<any>;
        };
    };
    // (undocumented)
    scope: {
        get: <T>(symbol: T, valueInstead?: any) => T;
    };
}

// @public (undocumented)
const Body_2: (key?: string | ((body: any) => any) | undefined) => Annotation;

export { Body_2 as Body }

// Warning: (ae-incompatible-release-tags) The symbol "Context" is marked as @public, but its signature references "BaseContext" which is marked as @internal
//
// @public (undocumented)
export class Context extends BaseContext<Context, BaseAuthContext> {
}

// @public (undocumented)
export const
/**
 * @public
 */
ContextParam: () => Annotation<ContextParamAnnotation>;

// @public (undocumented)
export class ContextParamAnnotation implements ParamAnnotation {
    // (undocumented)
    extractValue(context: DefaultContext): DefaultContext;
}

export { createAnnotationFactory }

// Warning: (ae-incompatible-release-tags) The symbol "DefaultContext" is marked as @public, but its signature references "BaseContext" which is marked as @internal
//
// @public (undocumented)
export class DefaultContext extends BaseContext<DefaultContext, any> {
}

// @public (undocumented)
export interface ExactTypeConverter<T> {
    // (undocumented)
    convert(value: any, paramType: Function): T;
    // (undocumented)
    type: Type<T>;
}

// @public (undocumented)
export interface Handler {
    // (undocumented)
    baseUrl: string;
    // (undocumented)
    controller: Type<any>;
    // (undocumented)
    controllerMethod: string;
    // (undocumented)
    handler: Handler;
    // (undocumented)
    invokeAsync: Middleware<any>;
    // (undocumented)
    paramAnnotations: ParamAnnotation[];
    // (undocumented)
    path: string;
    // (undocumented)
    paths: {
        [method: string]: string[];
    };
    // (undocumented)
    source: RouteMetadata;
}

// @public (undocumented)
export const
/**
 * @public
 */
Header: (a1: string) => Annotation<HeaderParamAnnotation>;

// @public (undocumented)
export class HeaderParamAnnotation implements ParamAnnotation {
    constructor(paramName: string);
    // (undocumented)
    extractValue(context: DefaultContext): string | string[] | undefined;
    }

// Warning: (ae-incompatible-release-tags) The symbol "Ingress" is marked as @public, but its signature references "BaseContext" which is marked as @internal
//
// @public (undocumented)
export class Ingress<T extends BaseContext<T, A> = DefaultContext, A extends BaseAuthContext = BaseAuthContext> {
    constructor(options?: {
        server?: Server;
    });
    // (undocumented)
    close(): Promise<void>;
    // (undocumented)
    createContext(req: IncomingMessage, res: ServerResponse): T;
    // (undocumented)
    listen(options?: ListenOptions | number): Promise<string | import("net").AddressInfo | null>;
    // (undocumented)
    get middleware(): import("app-builder").ContinuationMiddleware<T>;
    // (undocumented)
    server?: Server;
    // (undocumented)
    start(app?: Ingress): Promise<void>;
    // (undocumented)
    stop(): Promise<void>;
    // (undocumented)
    use(usable: Addon<T>): this;
}

// Warning: (ae-forgotten-export) The symbol "IngressOptions" needs to be exported by the entry point main.d.ts
// Warning: (ae-incompatible-release-tags) The symbol "ingress" is marked as @public, but its signature references "BaseContext" which is marked as @internal
//
// @public (undocumented)
function ingress<T extends BaseContext<T, A> = DefaultContext, A extends BaseAuthContext = BaseAuthContext>(options?: IngressOptions<T>): Ingress<T, A> & {
    container: Container<import("@ingress/di").ContainerContext>;
    router: RouterAddon<T>;
    Controller: import("./router/controller-annotation").ControllerDependencyCollector;
    Service: import("@ingress/di").DependencyCollector;
    SingletonService: import("@ingress/di").DependencyCollector;
};

export default ingress;

// @public (undocumented)
export type IngressApp = ReturnType<typeof ingress>;

// @public (undocumented)
export interface ListenOptions {
    // (undocumented)
    backlog?: number;
    // (undocumented)
    exclusive?: boolean;
    // (undocumented)
    host?: string;
    // (undocumented)
    path?: string;
    // (undocumented)
    port?: number;
    // (undocumented)
    readableAll?: boolean;
    // (undocumented)
    writableAll?: boolean;
}

// @public (undocumented)
export interface ParamAnnotation {
    // (undocumented)
    extractValue(context: DefaultContext): any;
}

// @public
export const Parse: (options?: ParseOptions | undefined) => Annotation<ParseAnnotation>;

// @public (undocumented)
export class ParseAnnotation {
    constructor(options?: ParseOptions);
    // (undocumented)
    readonly isBodyParser = true;
    // Warning: (ae-incompatible-release-tags) The symbol "middleware" is marked as @public, but its signature references "BaseContext" which is marked as @internal
    //
    // (undocumented)
    get middleware(): (context: BaseContext<any, any>, next: any) => Promise<any>;
    }

// @public (undocumented)
export interface ParseOptions {
    // (undocumented)
    buffer?: boolean;
    // (undocumented)
    maxBytes?: number;
    // (undocumented)
    parse?: boolean;
    // (undocumented)
    stream?: boolean;
}

// @public (undocumented)
export const Path: (key?: string | ((body: any) => any) | undefined) => Annotation;

// @public (undocumented)
export interface PathFactory {
    // (undocumented)
    (urlDefinition?: string, ...methods: Array<PathFactory | string>): Annotation;
}

// @public (undocumented)
export interface PredicateTypeConverter<T> {
    // (undocumented)
    convert(value: any, paramType: Function): T;
    // (undocumented)
    typePredicate: (type: Function) => boolean;
}

// @public (undocumented)
export const Query: (key?: string | ((body: any) => any) | undefined) => Annotation;

// @public (undocumented)
interface Request_2<T> extends IncomingMessage {
    // (undocumented)
    context: T;
}

export { Request_2 as Request }

// @public (undocumented)
interface Response_2<T> extends ServerResponse {
    // (undocumented)
    context: T;
}

export { Response_2 as Response }

// @public (undocumented)
export interface Route extends PathFactory {
    Body: RouteParamAnnotation;
    Context: typeof ContextParam;
    Delete: PathFactory;
    Get: PathFactory;
    Head: PathFactory;
    Header: typeof Header;
    Parse: typeof Parse;
    Patch: PathFactory;
    Path: RouteParamAnnotation;
    Post: PathFactory;
    Put: PathFactory;
    Query: RouteParamAnnotation;
}

// @public (undocumented)
export const Route: Route;

// @public (undocumented)
export type RouteMetadata = AnnotatedPropertyDescription & {
    controller: Type<any>;
};

// @public (undocumented)
export type RouteParamAnnotation = typeof Body_2;

// @public (undocumented)
export interface SetupTeardown {
    // (undocumented)
    (server: Ingress<any>): Promise<any> | any;
}

// @public (undocumented)
export const Type: FunctionConstructor;

// @public (undocumented)
export interface Type<T> {
    // (undocumented)
    new (...args: any[]): T;
}

// @public (undocumented)
export type TypeConverter<T> = ExactTypeConverter<T> | PredicateTypeConverter<T>;

// @public (undocumented)
export interface Usable<T> {
    // (undocumented)
    middleware?: Middleware<T>;
    // (undocumented)
    start?: SetupTeardown;
    // (undocumented)
    stop?: SetupTeardown;
}


// Warnings were encountered during analysis:
//
// lib/app.d.ts:34:5 - (ae-forgotten-export) The symbol "RouterAddon" needs to be exported by the entry point main.d.ts

// (No @packageDocumentation comment for this package)

```
